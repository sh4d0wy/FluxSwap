# Cross-Chain Resolver Deployment Scripts

This directory contains TypeScript scripts for deploying and interacting with the Cross-Chain Resolver contracts using Foundry and ethers.js.

## Prerequisites

- Node.js 18+
- Foundry (https://getfoundry.sh/)
- TypeScript: `npm install -g typescript ts-node`

## Setup

1. Install dependencies:
   ```bash
   cd scripts
   npm install
   ```

2. Set up environment variables in a `.env` file:
   ```env
   # Required
   PRIVATE_KEY=your_private_key_here
   RPC_URL=https://your.rpc.url
   
   # Optional
   CHAIN_ID=11155111  # Sepolia testnet
   VERIFY_CONTRACT=false
   EXPLORER_URL=https://sepolia.etherscan.io
   API_KEY=your_etherscan_api_key
   INITIAL_OWNER=0x...  # Optional, defaults to deployer
   ```

## Available Scripts

### Deploy NearBridge

Deploys the NearBridge contract with the specified parameters.

```bash
# Navigate to the scripts directory
cd scripts

# Deploy with default parameters
npm run deploy:near-bridge

# Or with environment variables
CHAIN_ID=11155111 \
RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_KEY \
PRIVATE_KEY=your_private_key \
npm run deploy:near-bridge
```

### Deploy Escrow Factory

Deploys the TestEscrowFactory contract and optionally creates a sample escrow.

```bash
# Deploy with default parameters
npm run deploy:escrow

# Deploy and create a sample escrow
CREATE_SAMPLE_ESCROW=true npm run deploy:escrow
```

## How It Works

1. The scripts use Foundry to compile the contracts and ethers.js to interact with the blockchain.
2. Contract ABIs are automatically loaded from the `out` directory generated by Foundry.
3. Deployment parameters can be configured via environment variables.
4. The scripts provide detailed logs and error handling.

## Notes

- Make sure your Foundry project is built before running the scripts: `forge build`
- The scripts are designed to work with the existing Solidity contracts in the parent directory.
- For production use, ensure proper security measures are in place for handling private keys.
